var ENV="",numFormat=wNumb({thousand:" "});$(window).on("scroll touchmove",function(){fixedHeader();var e=$(window).scrollTop();if("block"==$("#md-indicator").css("display"))var t=60;else t=70;$("a[name]").each(function(){e>$(this).offset().top-t-10&&($(".navbar-nav a").removeClass("active"),$(".navbar-nav a[href='#"+$(this).attr("name")+"']").addClass("active"))}),TweenMax.to($(".marquee-content"),1,{x:($(window).scrollTop()-$(".marquee-content").offset().top)/$(window).height()/12*100+"%"})}),$(window).resize(function(){fixedHeader(),$(".slick-slider").slick("setPosition")}),$(window).on("load",function(){});var baseUrl="";function validateForms(){$(".textarea-autogrow").autogrow(),$("input.input-phone").mask("+7 (999) 999-99-99"),jQuery.validator.addClassRules("phone-email-group",{require_from_group:[1,".phone-email-group"]}),$("select").not(".location-tabs-select").not(".filter-form select").on("change",function(){$(this).closest(".picker").length||$(this).hasClass("faq-select")||$(this).valid()}),$("body").on("click",".form-item",function(e){!$(this).find(".bootstrap-select").length||$(e.target).hasClass("bootstrap-select")||$(e.target).parents().hasClass("bootstrap-select")||$(e.target).closest(".form-item").find("select").selectpicker("toggle")}),$("form").each(function(){form=$(this),$(this).validate({focusInvalid:!0,sendForm:!1,errorPlacement:function(e,t){"SELECT"==t[0].tagName?(t.closest(".form-item").addClass("error"),t.closest(".btn-group").addClass("btn-group-error"),t.closest(".form-item").length?e.insertAfter(t.closest(".form-item")):e.insertAfter(t.closest(".btn-group"))):"checkbox"==t.attr("type")?t.siblings("label").addClass("checkbox-label-error"):(e.insertAfter(t),t.closest(".form-group").addClass("form-group-error"))},unhighlight:function(e,t,s){$(e).removeClass(t),$(e).closest(".form-item").removeClass("error").addClass("valid"),$(e).closest(".form-group").removeClass("form-group-error"),"SELECT"==$(e)[0].tagName?($(e).closest(".form-item").removeClass("error"),$(e).closest(".btn-group").removeClass("btn-group-error"),$(e).closest(".form-item").length?(error.insertAfter(e.closest(".form-item")),$(e).closest(".form-item").next("label.error").remove()):$(e).closest(".btn-group").next("label.error").remove()):($(e).next(".error").remove(),"checkbox"==$(e).attr("type")&&$(e).siblings("label").removeClass("checkbox-label-error"))},invalidHandler:function(e,t){t.numberOfInvalids()&&"INPUT"==t.errorList[0].element.tagName&&t.errorList[0].element.focus()},submitHandler:function(e){if("production"!==ENV)return $.ajax({type:"POST",data:$(e).serialize(),success:function(){formSuccess(e)}}),!1;submitHandler(e)}}),$(this).find("input.password").length&&$(this).find("input.password-repeat").length&&$(this).find("input.password-repeat").rules("add",{equalTo:"#"+form.find("input.password").attr("id")})})}function declOfNum(e,t){return cases=[2,0,1,1,1,2],t[e%100>4&&e%100<20?2:cases[e%10<5?e%10:5]]}function formSuccess(e){$("form").find(".form-group input, .form-group textarea").val(""),$("form").find(".placeholder").show(),$("#successModal").modal("show"),$("form").closest(".modal").modal("hide")}function fixedHeader(){$(window).scrollTop()>0?$("header").hasClass("header-fixed")||$("header").addClass("header-fixed"):$("header").hasClass("header-fixed")&&$("header").removeClass("header-fixed")}function anchorsMenu(){$(".anchors-menu a, a[href='#quiz']").click(function(){var e=$(this);if($("header").hasClass("header-fixed"))var t=$("header").outerHeight();else t=60;$("a[name='"+e.attr("href").replace("#","")+"']").length&&$("html, body").animate({scrollTop:$("a[name='"+e.attr("href").replace("#","")+"']").offset().top-t-50},1e3)})}function getHashVars(){var e=window.location.hash,t=(e=e.replace("#","")).split("&"),s=new Array;for(var a in t)hashVar=t[a].split("="),s[hashVar[0]]=hashVar[1];return s}function setHashVar(e,t){var s=getHashVars();t?s[e]=t:s[e]&&(delete s[e],delete s[e]),history.pushState("",document.title,window.location.pathname);var a="#";for(var i in s)i&&(a+=i+"="+s[i]+"&");history.pushState({},null,a.substring(0,a.length-1))}function initSliders(){$(".slider-countable").each(function(){$(this).on("init",function(){if(!$(this).closest(".slider-wrapper").find(".slider-count").length){var e=$(this),t=$(this).find(".slick-slide.slick-active").length,s=$(this).find(".slick-slide.slick-current").data("slick-index")/t+1,a=Math.round($(this).find(".slick-slide").not(".slick-cloned").length/t);e.closest(".slider-wrapper").append('<div class="slider-count"><span class="slider-count-cur">'+s+'</span><span class="slider-count-sep">/</span><span class="slider-count-total">'+a+"</span></div>"),1==a&&e.closest(".slider-wrapper").find(".slider-count").hide()}}),$(this).on("beforeChange",function(e,t,s,a){var i=$(this),l=$(this).find(".slick-slide.slick-active").length,o=a/l+1,r=$(this).find(".slick-slide").not(".slick-cloned").length/l;i.closest(".slider-wrapper").find(".slider-count-cur").html(o),i.closest(".slider-wrapper").find(".slider-count-progress-bar").css({width:100*o/r+"%"})})}),$(".works-slider").each(function(){$(this).hasClass("slick-initialized")||$(this).slick({slidesToShow:1,slidesToScroll:1,dots:!1,rows:0,speed:1e3,infinite:!1,responsive:[{breakpoint:768,settings:{adaptiveHeight:!0}}]})}),$(".reviews-slider").each(function(){$(this).hasClass("slick-initialized")||$(this).slick({slidesToShow:2,slidesToScroll:2,fade:!1,dots:!1,rows:0,speed:750,infinite:!1,responsive:[{breakpoint:992,settings:{slidesToShow:1,slidesToScroll:1}}]})}),$(".courses-slider").each(function(){$(this).hasClass("slick-initialized")||$(this).slick({slidesToShow:3,slidesToScroll:3,fade:!1,dots:!1,rows:0,speed:750,infinite:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:992,settings:{slidesToShow:1,slidesToScroll:1}}]})}),$(".courses-slider-alt").each(function(){$(this).hasClass("slick-initialized")||$(this).slick({slidesToShow:2,slidesToScroll:2,fade:!1,dots:!1,rows:0,speed:750,infinite:!1,responsive:[{breakpoint:992,settings:{slidesToShow:1,slidesToScroll:1}}]})}),$(".blog-slider").each(function(){$(this).hasClass("slick-initialized")||$(this).slick({slidesToShow:1,slidesToScroll:1,fade:!1,dots:!1,rows:0,speed:750,infinite:!1})}),$(".teachers-slider").each(function(){$(this).hasClass("slick-initialized")||$(this).slick({slidesToShow:1,slidesToScroll:1,fade:!0,dots:!1,rows:0,speed:500,infinite:!1,asNavFor:".teachers-pics-slider"})}),$(".teachers-pics-slider").each(function(){$(this).hasClass("slick-initialized")||$(this).slick({slidesToShow:1,slidesToScroll:1,fade:!0,arrows:!1,dots:!1,rows:0,speed:500,infinite:!1,swipe:!1})}),$(".photo-slider").each(function(){$(this).hasClass("slick-initialized")||$(this).slick({slidesToShow:1,slidesToScroll:1,fade:!0,dots:!1,rows:0,speed:500,infinite:!1})})}function stickyBlocks(){if("block"!=$("#md-indicator").css("display")){var e=$(".sticky-block").filter(function(){return!$(this).find(".news-filter").length}),t=80;$(window).on("resize scroll touchmove",function(){e.each(function(){$(this).data("orig-width",$(this).outerWidth());var e=$(this),s=$("header").outerHeight(),a=$(this).outerHeight(),i=$(this).closest(".sticky-wrapper"),l=i.outerHeight(),o=$(window).scrollTop();let r=o>i.offset().top-s-30;t=0,topPos=s+30,r?(e.addClass("fixed").css({top:topPos,width:e.data("orig-width")}),o>i.offset().top+l-a-t-s-30?e.css({marginTop:i.offset().top+l-a-t-s-30-o}):e.css({marginTop:0})):e.removeClass("fixed").css({width:"auto",marginTop:0,top:0})})})}}$(document).ready(function(){if($("body").on("click",".tool-tmb",function(){var e=$(this),t=$(".tool-tmb").closest(".skill-tmb").find(".tool-descr").filter(function(){return $(this).prevAll().length==e.closest("li").prevAll().length});$(".tool-tmb").not($(this)).removeClass("active"),$(this).toggleClass("active"),$(".tool-descr").not(t).hide(),t.fadeToggle(200)}),$(".calc-result-slider").slick({slidesToShow:1,slidesToScroll:1,fade:!0,arrows:!1,swipe:!1,dots:!1,rows:0,adaptiveHeight:!0}),$("#calcRange").length){var e=document.getElementById("calcRange");noUiSlider.create(e,{start:5e4,step:1e4,animate:!0,tooltips:[!0],range:{min:5e4,max:25e4},format:wNumb({decimals:0,thousand:" "})}),e.noUiSlider.on("update",function(e,t,s,a,i){e[t];var l=i[t].toFixed(0),o=$(".calc-skill");calcSkillsIndex=Math.floor(o.length*l/100),0==calcSkillsIndex&&(calcSkillsIndex=1),o.removeClass("active"),o.filter(function(){return $(this).prevAll().length==calcSkillsIndex-1}).addClass("active"),o.filter(function(){return $(this).prevAll().length==calcSkillsIndex-1}).prevAll().addClass("active"),calcResultIndex=Math.floor($(".calc-result-slider .slide").length*l/100),calcResultIndex==$(".calc-result-slider .slide").length&&(calcResultIndex=$(".calc-result-slider .slide").length-1),$(".calc-result-slider").slick("slickGoTo",calcResultIndex)})}$(".marquee-list").each(function(){var e=$(this),t=$(this).clone(),s=$(this).clone();$(this).find(".marquee-item").length;e.before(t),e.after(s)}),$(".calc-checkboxes input").on("change",function(){$(".calc-wrapper .slick-slider").slick("slickNext")}),$("body").on("click",".header-login-trigger",function(){$(".header-login-popup").fadeToggle(250,function(){$(".header-login-trigger").toggleClass("active")})}),$("body").on("click",function(e){!$(".header-login-trigger").hasClass("active")||$(e.target).hasClass("header-login")||$(e.target).parents().hasClass("header-login")||$(".header-login-popup").fadeOut(250,function(){$(".header-login-trigger").removeClass("active")})}),$("body").on("click","[data-target='#consultModal']",function(){$("#program_modal_course").val($(this).closest(".course-tmb").find("h3").text())}),$(".modal").on("hidden.bs.modal",function(){$(".modal.show").length&&$("body").addClass("modal-open")}),initSliders(),$(".svg-inline").svgInline(),$(".btn-scroll").click(function(){$("[href='#directions']").click()}),$(".modal").click(function(e){$(this).find(".who-item").length?$(e.target).hasClass("who-item")||$(e.target).parents().hasClass("who-item")||$(this).modal("hide"):$(e.target).hasClass("modal-content")||$(e.target).parents().hasClass("modal-content")||$(this).modal("hide")}),$("body").on("click","[data-toggle='modal'][data-url]",function(){if($(this).closest(".room-descr").length)return!1;var e=$($(this).attr("data-target"));e.find(".ajax-modal-content").html("").addClass("loading"),setHashVar("modal",$(this).attr("data-hash")),$.ajax({url:$(this).attr("data-url"),dataType:"html"}).done(function(t){e.find(".ajax-modal-content").html($(t)),e.find(".ajax-modal-content").removeClass("loading")})});var t=getHashVars();t.modal&&$("[data-toggle='modal'][data-hash='"+t.modal+"']").click();$(".modal").on("hidden.bs.modal",function(){setHashVar("modal","")}),anchorsMenu(),stickyBlocks(),$("body").on("click",".faq-item-ttl",function(){if($(this).closest(".faq-item").hasClass("active")){(t=$(this).closest(".faq-item")).removeClass("active"),t.find(".faq-item-content").show().slideUp("250")}else{var e=$(".faq-item.active"),t=$(this).closest(".faq-item");e.removeClass("active"),e.find(".faq-item-content").show().slideUp("250"),t.addClass("active"),t.find(".faq-item-content").hide().slideDown("250"),$(".faq-answer").html(t.find(".faq-item-content").html())}}),$("body").on("click",".program-item-ttl",function(){var e;$(this).closest(".program-item").hasClass("active")?((e=$(this).closest(".program-item")).removeClass("active"),e.find(".program-item-content").show().slideUp("250")):((e=$(this).closest(".program-item")).addClass("active"),e.find(".program-item-content").hide().slideDown("250"))}),$("body").on("click",".profile-menu-ttl",function(){if($(this).closest(".profile-menu-item").hasClass("active")){(t=$(this).closest(".profile-menu-item")).removeClass("active"),t.find(".profile-submenu").show().slideUp("250")}else{$(".profile-slider").slick("slickGoTo",$(this).closest(".profile-menu-item").prevAll().length);var e=$(".profile-menu-item.active"),t=$(this).closest(".profile-menu-item");e.removeClass("active"),e.find(".profile-submenu").show().slideUp("250"),t.addClass("active"),t.find(".profile-submenu").hide().slideDown("250"),$(".profile-answer").html(t.find(".profile-submenu").html())}}),$("body").on("click",".show-more",function(){var e=$(this),t=$(this).attr("href"),s=$($(this).closest(".show-more-wrapper").parent());return e.addClass("loading"),$.ajax({url:t,dataType:"html"}).done(function(t){s.append($(t)).removeClass("loading"),e.closest(".show-more-wrapper").remove(),$(t).find("[data-dates]").length&&castFilter(s.closest(".cast-over-wrapper"))}),!1}),fixedHeader(),$("body").on("click",".ajax-link",function(){var e=$(this),t=$(this).data("url"),s=$($(this).data("target")),a=$(this).closest(".ajax-links").find(".ajax-link");return s.addClass("loading"),$.ajax({url:t,dataType:"html"}).done(function(t){s.html($(t)).removeClass("loading"),a.removeClass("active"),e.addClass("active"),e.hasClass("location-link")&&($(".location-tabs-select").val(e.data("index")),"block"!=$("#mobile-indicator").css("display")&&$(".location-tabs-select").change())}),!1}),$(".navbar-nav a").click(function(){$(".navbar-nav a").removeClass("active");var e=$(this),t=$(this).attr("href").replace("#","");$(this);if("block"==$("#md-indicator").css("display"))var s=60;else s=70;return $("html,body").animate({scrollTop:$("a[name='"+t+"']").offset().top-s},1e3,function(){e.addClass("active")}),history.pushState(null,null,$(this).attr("href")),!1}),$("body").on("click",".page-nav li",function(){$(this),$(this);if("block"==$("#mobile-indicator").css("display"))var e=-20;else e=10;$("html,body").animate({scrollTop:$(".section[data-index='"+$(this).data("index")+"']").offset().top-e},1e3,function(){})}),$("[data-fancybox]").fancybox({closeClickOutside:!0,backFocus:!1}),$("body").on("click",".more-link",function(){var e=$(this),t=$(this).attr("href");return e.hasClass("loading")||(e.addClass("loading"),$.ajax({url:t,dataType:"html"}).done(function(t){e.closest(".more-link-wrapper").before($(t)),e.closest(".more-link-wrapper").remove(),$(".more-link").closest(".projects-list").length&&$(".more-link").closest(".projects-list").find(".project-tmb").css("opacity","1")})),!1}),$(".up-link").click(function(){$("html, body").animate({scrollTop:0},1e3)}),$("body").on("click",function(e){"block"!=$("#md-indicator").css("display")||$(e.target).hasClass("navbar-wrapper")||$(e.target).parents().hasClass("navbar-wrapper")||$(e.target).hasClass("navbar-trigger")||$(e.target).parents().hasClass("navbar-trigger")||($(".navbar-wrapper").fadeOut(150),$("body").removeClass("menu-open"),$(".navbar-trigger").removeClass("active"))}),$(".navbar-trigger").click(function(){$(this).toggleClass("active"),$(".navbar-wrapper").fadeToggle(150),$("body").toggleClass("menu-open")}),$(".navbar-wrapper .close, .navbar-nav a").click(function(){$(".navbar-wrapper").fadeOut(150),$("body").removeClass("menu-open"),$(".navbar-trigger").removeClass("active")}),$(".navbar-wrapper").click(function(e){$(e.target).hasClass("navbar-wrapper-inner")||$(e.target).parents().hasClass("navbar-wrapper-inner")||($(".navbar-wrapper").fadeOut(150),$("body").removeClass("menu-open"),$(".navbar-trigger").removeClass("active"))}),$("body").on("click",function(e){"block"!=$("#md-indicator").css("display")&&($(e.target).hasClass("navbar-trigger")||$(e.target).parents().hasClass("navbar-trigger")||$(e.target).hasClass("navbar-wrapper")||$(e.target).parents().hasClass("navbar-wrapper")||!$(".navbar-trigger").hasClass("active")||($(".navbar-wrapper").fadeOut(150),$(".navbar-trigger").removeClass("active")))}),$("body").on("click",".expandable-trigger",function(){var e=$(this);return e.hasClass("active")?e.closest(".expandable").find(".expandable-content").slideUp(500,function(){e.removeClass("active"),e.find(".expandable-trigger-text").html(e.data("expandtext")),e.closest(".expandable").removeClass("open")}):e.closest(".expandable").find(".expandable-content").slideDown(500,function(){e.addClass("active"),e.find(".expandable-trigger-text").html(e.data("collapsetext")),e.closest(".expandable").addClass("open")}),!1}),$("input[type=file]").each(function(){if($(this).data("label"))var e=$(this).data("label");else e="Прикрепить файл";$(this).fileinput({showUpload:!1,showPreview:!1,showCancel:!1,browseLabel:e,msgPlaceholder:"",dropZoneEnabled:!1,maxFileCount:1,mainClass:"input-group-lg"})}),$(document).on("input",".numeric",function(){this.value=this.value.replace(/\D/g,"")}),$("body").on("mouseup","li.dropdown-header",function(){return $(this).toggleClass("active"),$(this).nextAll("li[data-optgroup='"+$(this).data("optgroup")+"']").fadeToggle(150),!1}),$("select").not(".picker__select--month, .picker__select--year, .rates-nav-select").each(function(){$(this).attr("multiple")?$(this).selectpicker({selectAllText:"Выбрать всё",deselectAllText:"Снять выбор",noneSelectedText:"",selectedTextFormat:"count",countSelectedText:function(e){return e+" "+declOfNum(e,["элемент","элемента","элементов"])}}):$(this).selectpicker()}),$("select[multiple]").not(".simple-multi").on("shown.bs.select",function(){$(this).prev(".dropdown-menu").find(".dropdown-footer").length||(dropdownFooter='      <div class="dropdown-footer">      <div class="btn btn-1 btn-ico btn-save">Выбрать</div>      <div class="btn btn-cancel">Очистить</div>      </div>      ',$(this).prev(".dropdown-menu").find("ul").append(dropdownFooter))}),$("select").on("show.bs.select",function(){$(this).closest(".form-group").find("label.placeholder").addClass("active")}),$("select").on("hide.bs.select",function(){$(this).val()&&null!=$(this).val()?$(this).closest(".form-group").find("label.placeholder").addClass("active"):$(this).closest(".form-group").find("label.placeholder").removeClass("active")}),$("body").on("click",".bootstrap-select .btn-save",function(){return $(this).closest("div.dropdown-menu").next("select").selectpicker("toggle"),!1}),$("body").on("click",".bootstrap-select .btn-cancel",function(){return $(this).closest("div.dropdown-menu").next("select").selectpicker("deselectAll"),!1}),$(".input-numeric").bind("keyup paste",function(){this.value=this.value.replace(/[^0-9]/g,"")}),$("input:text").length&&$("input:text").each(function(){$(this).val()&&$(this).prev(".placeholder").addClass("active")}),$("textarea").length&&$("textarea").each(function(){$(this).val()&&$(this).prev(".placeholder").addClass("active")}),$("body").on("focus","input, textarea",function(){var e=$(this);e.parent().find(".placeholder").length&&e.parent().find(".placeholder").addClass("active")}),$("body").on("blur","input, textarea",function(){var e=$(this);if(e.parent().find(".placeholder").length){var t=e.parent().find(".placeholder");(!e.val()||e.hasClass("input-phone")&&!/^(?=.*[0-9])[- +()0-9]+$/.test(e.val()))&&t.removeClass("active")}}),$("body").on("click",".placeholder",function(e){$(this).parent().find("input").length&&$(this).parent().find("input").trigger("focus"),$(this).parent().find("textarea").length&&$(this).parent().find("textarea").trigger("focus")}),$("body").on("focus","input[type=text], input[type=email], input[type=password], textarea",function(){$(this).closest(".form-item").addClass("focus")}),$("body").on("blur","input[type=text], input[type=email], input[type=password], textarea",function(){$(this).closest(".form-item").removeClass("focus")}),validateForms()}),jQuery.extend(jQuery.validator.messages,{required:"Не заполнено поле",remote:"Please fix this field.",email:"Введите правильный e-mail.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Пароли не совпадают.",accept:"Please enter a value with a valid extension.",maxlength:jQuery.validator.format("Please enter no more than {0} characters."),minlength:jQuery.validator.format("Please enter at least {0} characters."),rangelength:jQuery.validator.format("Please enter a value between {0} and {1} characters long."),range:jQuery.validator.format("Please enter a value between {0} and {1}."),max:jQuery.validator.format("Please enter a value less than or equal to {0}."),min:jQuery.validator.format("Please enter a value greater than or equal to {0}.")}),function(e){e.fn.autogrow=function(){return this.each(function(){var t=this;e(t).on("focus keyup input blur",function(){e(t).css("height","auto").css("height",e(t)[0].scrollHeight+1+"px")})})}}(jQuery),jQuery.fn.svgInline=function(){return this.each(function(){var e=jQuery(this),t=e.attr("id"),s=e.attr("class"),a=e.attr("src");jQuery.get(a,function(a){var i=jQuery(a).find("svg");void 0!==t&&(i=i.attr("id",t)),void 0!==s&&(i=i.attr("class",s+" replaced-svg")),i=i.removeAttr("xmlns:a"),e.replaceWith(i)},"xml")})};