function validateForms(){jQuery.validator.addClassRules("phone-email-group",{require_from_group:[1,".phone-email-group"]}),$("select").not(".location-tabs-select").not(".filter-form select").on("change",function(){$(this).closest(".picker").length||$(this).hasClass("faq-select")||$(this).valid()}),$("body").on("click",".form-item",function(e){!$(this).find(".bootstrap-select").length||$(e.target).hasClass("bootstrap-select")||$(e.target).parents().hasClass("bootstrap-select")||$(e.target).closest(".form-item").find("select").selectpicker("toggle")}),$("form").each(function(){form=$(this),$(this).validate({focusInvalid:!0,sendForm:!1,errorPlacement:function(e,t){"SELECT"==t[0].tagName?(t.closest(".form-item").addClass("error"),t.closest(".btn-group").addClass("btn-group-error"),t.closest(".form-item").length?e.insertAfter(t.closest(".form-item")):e.insertAfter(t.closest(".btn-group"))):"checkbox"==t.attr("type")?t.siblings("label").addClass("checkbox-label-error"):(e.insertAfter(t),t.closest(".form-group").addClass("form-group-error"))},unhighlight:function(e,t,s){$(e).removeClass(t),$(e).closest(".form-item").removeClass("error").addClass("valid"),$(e).closest(".form-group").removeClass("form-group-error"),"SELECT"==$(e)[0].tagName?($(e).closest(".form-item").removeClass("error"),$(e).closest(".btn-group").removeClass("btn-group-error"),$(e).closest(".form-item").length?(error.insertAfter(e.closest(".form-item")),$(e).closest(".form-item").next("label.error").remove()):$(e).closest(".btn-group").next("label.error").remove()):($(e).next(".error").remove(),"checkbox"==$(e).attr("type")&&$(e).siblings("label").removeClass("checkbox-label-error"))},invalidHandler:function(e,t){t.numberOfInvalids()&&"INPUT"==t.errorList[0].element.tagName&&t.errorList[0].element.focus()},submitHandler:function(e){if("FORM_FOOTER"==$(e).attr("name")){var t=$("form[name='FORM_FOOTER'] input[id='recaptcha_token']");grecaptcha.ready(function(){grecaptcha.execute("6Lfle7UZAAAAABgO9YJ7aqspp5IaRDrNNOb76dhn",{action:"agree"}).then(function(s){$(t).val(s),$.ajax({type:"POST",data:$(e).serialize(),success:function(){formSuccess(e)}})})})}else"FORM_NEW_REVIEW"!=$(e).attr("name")&&"FORM_INFORM_ADMISSION"!=$(e).attr("name")&&$.ajax({type:"POST",data:$(e).serialize(),success:function(){formSuccess(e)}});return!1}}),$(this).find("input.password").length&&$(this).find("input.password-repeat").length&&$(this).find("input.password-repeat").rules("add",{equalTo:"#"+form.find("input.password").attr("id")})})}function declOfNum(e,t){return cases=[2,0,1,1,1,2],t[e%100>4&&e%100<20?2:cases[e%10<5?e%10:5]]}function formSuccess(e){$("form").find(".form-group input, .form-group textarea").val(""),$("form").find(".placeholder").show(),$("#successModal").modal("show"),$("form").closest(".modal").modal("hide")}function childSelects(){$("select[data-parent]").each(function(){var e=$(this),t=$($(this).data("parent")),s=e.closest(".child-select-container");t.val()&&""!=t.val()?(e.prop("disabled",!1).selectpicker("refresh"),s.show()):(e.prop("disabled",!0).selectpicker("refresh"),s.hide())})}function initForms(){$(".textarea-autogrow").autogrow(),$("input.input-phone").mask("+7 (999) 999-99-99"),$("select").selectpicker({styleBase:"",style:"btn-select"}),$("body").on("changed.bs.select","select",function(){$(this).val()?$(this).closest(".bootstrap-select").addClass("filled"):$(this).closest(".bootstrap-select").removeClass("filled")}),$("body").on("loaded.bs.select","select",function(){$(this).val()?$(this).closest(".bootstrap-select").addClass("filled"):$(this).closest(".bootstrap-select").removeClass("filled");var e=$(this);e.find("option[value='']").length&&e.closest(".bootstrap-select").append('<div class="btn-select-reset"></div>')}),$("body").on("click",".btn-select-reset",function(){$(this).closest(".bootstrap-select").find("select").val("").change().selectpicker("refresh")}),$("body").on("click",".btn-form-reset",function(){$(this).closest("form").find("select").val("").change().selectpicker("refresh")}),$("select[multiple]").not(".simple-multi").on("shown.bs.select",function(){$(this).prev(".dropdown-menu").find(".dropdown-footer").length||(dropdownFooter='      <div class="dropdown-footer">      <div class="btn btn-1 btn-ico btn-save">Выбрать</div>      <div class="btn btn-cancel">Очистить</div>      </div>      ',$(this).prev(".dropdown-menu").find("ul").append(dropdownFooter))}),$("select").on("show.bs.select",function(){$(this).closest(".form-group").find("label.placeholder").addClass("active")}),$("select").on("hide.bs.select",function(){$(this).val()&&null!=$(this).val()?$(this).closest(".form-group").find("label.placeholder").addClass("active"):$(this).closest(".form-group").find("label.placeholder").removeClass("active")}),$("body").on("click",".bootstrap-select .btn-save",function(){return $(this).closest("div.dropdown-menu").next("select").selectpicker("toggle"),!1}),$("body").on("click",".bootstrap-select .btn-cancel",function(){return $(this).closest("div.dropdown-menu").next("select").selectpicker("deselectAll"),!1}),$(".input-numeric").bind("keyup paste",function(){this.value=this.value.replace(/[^0-9]/g,"")}),$("input:text").length&&$("input:text").each(function(){$(this).val()&&$(this).prev(".placeholder").addClass("active")}),$("textarea").length&&$("textarea").each(function(){$(this).val()&&$(this).prev(".placeholder").addClass("active")}),$("body").on("focus","input, textarea",function(){var e=$(this);e.parent().find(".placeholder").length&&e.parent().find(".placeholder").addClass("active")}),$("body").on("blur","input, textarea",function(){var e=$(this);if(e.parent().find(".placeholder").length){var t=e.parent().find(".placeholder");(!e.val()||e.hasClass("input-phone")&&!/^(?=.*[0-9])[- +()0-9]+$/.test(e.val()))&&t.removeClass("active")}}),$("body").on("click",".placeholder",function(e){$(this).parent().find("input").length&&$(this).parent().find("input").trigger("focus"),$(this).parent().find("textarea").length&&$(this).parent().find("textarea").trigger("focus")}),$("body").on("focus","input[type=text], input[type=email], input[type=password], textarea",function(){$(this).closest(".form-item").addClass("focus")}),$("body").on("blur","input[type=text], input[type=email], input[type=password], textarea",function(){$(this).closest(".form-item").removeClass("focus")}),validateForms()}$(document).ready(function(){initForms(),$("body").on("click",".btn-filter",function(){var e=$(this);$(".filter-wrapper-expandable").slideToggle(250,function(){e.toggleClass("active"),$(".filter-wrapper-expandable").toggleClass("active")})}),$(".filter").on("changed.bs.select","select",function(){$(this).closest(".filter").find("input[type=submit]").prop("disabled",!1),$(this).closest(".filter").find(".btn-form-reset").removeAttr("disabled")})}),jQuery.extend(jQuery.validator.messages,{required:"Не заполнено поле",remote:"Please fix this field.",email:"Введите правильный e-mail.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Пароли не совпадают.",accept:"Please enter a value with a valid extension.",maxlength:jQuery.validator.format("Please enter no more than {0} characters."),minlength:jQuery.validator.format("Please enter at least {0} characters."),rangelength:jQuery.validator.format("Please enter a value between {0} and {1} characters long."),range:jQuery.validator.format("Please enter a value between {0} and {1}."),max:jQuery.validator.format("Please enter a value less than or equal to {0}."),min:jQuery.validator.format("Please enter a value greater than or equal to {0}.")}),function(e){e.fn.autogrow=function(){return this.each(function(){var t=this;e(t).on("focus keyup input blur",function(){e(t).css("height","auto").css("height",e(t)[0].scrollHeight+2+"px")})})}}(jQuery);